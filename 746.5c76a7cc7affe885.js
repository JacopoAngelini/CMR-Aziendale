"use strict";(self.webpackChunkProgettoFinale=self.webpackChunkProgettoFinale||[]).push([[746],{4746:($,d,a)=>{a.r(d),a.d(d,{InvoicesByCustomerModule:()=>j});var p=a(9808),v=a(5253),u=a(1083),h=a(7110),l=a(3075),C=a(6087),I=a(8505),r=a(8966),t=a(5e3),y=a(1792),Z=a(4936),g=a(7423),m=a(8279),f=a(7322),B=a(7531),T=a(4107),A=a(508);function _(o,i){1&o&&(t.TgZ(0,"th",15),t._uU(1," Numero Fattura "),t.qZA())}function b(o,i){if(1&o&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij(" ",e.numero," ")}}function N(o,i){1&o&&(t.TgZ(0,"th",15),t._uU(1," Azienda Intestataria "),t.qZA())}function x(o,i){if(1&o&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij(" ",e.cliente.ragioneSociale," ")}}function D(o,i){1&o&&(t.TgZ(0,"th",15),t._uU(1," Importo "),t.qZA())}function U(o,i){if(1&o&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij(" ",e.importo," ")}}function M(o,i){1&o&&(t.TgZ(0,"th",15),t._uU(1," Anno "),t.qZA())}function Q(o,i){if(1&o&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij(" ",e.anno," ")}}function Y(o,i){1&o&&(t.TgZ(0,"th",15),t._uU(1," Stato "),t.qZA())}function J(o,i){if(1&o&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij(" ",e.stato.nome," ")}}function F(o,i){1&o&&(t.TgZ(0,"th",15),t._uU(1," Azioni "),t.qZA())}function S(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"td",16)(1,"button",17),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw().editInvoice(c)}),t._uU(2,"Modifica"),t.qZA(),t.TgZ(3,"button",18),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw().deleteInvoiceByCustomer(c.id)}),t._uU(4,"Elimina"),t.qZA()()}}function z(o,i){1&o&&t._UZ(0,"tr",19)}function q(o,i){1&o&&t._UZ(0,"tr",20)}const O=function(o){return["/invoices",o]};function k(o,i){if(1&o&&(t.TgZ(0,"mat-option",9),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.nome)}}let R=(()=>{class o{constructor(e,n,s){this.ivcSrv=e,this.router=n,this.dialog=s,this.InvoicesCustomerList=!0,this.invoices=[],this.data={importo:0,statoId:0},this.displayedColumns=["Numero Fattura","Intestatario","Importo","Anno","Stato","Azioni"]}ngOnInit(){this.sub=this.router.params.subscribe(e=>{this.id=+e.id,console.log(this.id)}),this.getInvoicesByCustomer(0,this.id)}ngAfterViewInit(){this.paginator.page.pipe((0,I.b)(()=>this.getInvoicesByCustomer(this.paginator.pageIndex,this.id))).subscribe()}getInvoicesByCustomer(e,n){this.ivcSrv.getInvoicesByCustomer(e,n).subscribe(s=>{this.res=s,this.invoices=this.res.content,this.paginator.pageIndex=this.res.number,console.log(this.res),console.log(this.invoices)},s=>{console.log(s)})}deleteInvoiceByCustomer(e){confirm("sicuro di voler cancellare questa fattura?")&&(this.ivcSrv.deleteInvoice(e).subscribe(),setInterval(()=>{location.reload()},500))}editInvoice(e){this.dialog.open(w,{width:"250px",data:{importo:null,statoId:null}}).afterClosed().subscribe(s=>{console.log(s),null!=s.importo&&null!=s.statoId&&(e.importo=s.importo,e.stato.nome=1==s.statoId?"PAGATA":"NON PAGATA",e.stato.id=s.statoId,console.log(e),this.ivcSrv.editInvoice(e.id,e).subscribe())})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(y.x),t.Y36(u.gz),t.Y36(r.uw))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-invoices-by-customer"]],viewQuery:function(e,n){if(1&e&&t.Gf(C.NW,5),2&e){let s;t.iGM(s=t.CRH())&&(n.paginator=s.first)}},decls:26,vars:9,consts:[["id","invoicesbycustomer",3,"InvoicesCustomerList"],[1,"container-fluid","my-4"],["mat-raised-button","",1,"text-white","btn","btn-success","btn-lg",3,"routerLink"],["mat-table","",1,"mat-elevation-z8","mt-3",3,"dataSource"],["matColumnDef","Numero Fattura"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Intestatario"],["matColumnDef","Importo"],["matColumnDef","Anno"],["matColumnDef","Stato"],["matColumnDef","Azioni"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page","showFirstLastButtons","",3,"length","pageSize"],["mat-header-cell",""],["mat-cell",""],["mat-raised-button","","color","primary",1,"me-3",3,"click"],["mat-stroked-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,n){1&e&&(t.TgZ(0,"app-sidebar",0)(1,"div",1)(2,"button",2),t._uU(3,"Nuova Fattura"),t.qZA(),t.TgZ(4,"table",3),t.ynx(5,4),t.YNc(6,_,2,0,"th",5),t.YNc(7,b,2,1,"td",6),t.BQk(),t.ynx(8,7),t.YNc(9,N,2,0,"th",5),t.YNc(10,x,2,1,"td",6),t.BQk(),t.ynx(11,8),t.YNc(12,D,2,0,"th",5),t.YNc(13,U,2,1,"td",6),t.BQk(),t.ynx(14,9),t.YNc(15,M,2,0,"th",5),t.YNc(16,Q,2,1,"td",6),t.BQk(),t.ynx(17,10),t.YNc(18,Y,2,0,"th",5),t.YNc(19,J,2,1,"td",6),t.BQk(),t.ynx(20,11),t.YNc(21,F,2,0,"th",5),t.YNc(22,S,5,0,"td",6),t.BQk(),t.YNc(23,z,1,0,"tr",12),t.YNc(24,q,1,0,"tr",13),t.qZA(),t._UZ(25,"mat-paginator",14),t.qZA()()),2&e&&(t.Q6J("InvoicesCustomerList",n.InvoicesCustomerList),t.xp6(2),t.Q6J("routerLink",t.VKq(7,O,n.id)),t.xp6(2),t.Q6J("dataSource",n.invoices),t.xp6(19),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("length",n.res.totalElements)("pageSize",n.res.pageable.pageSize))},directives:[Z.k,g.lW,u.rH,m.BZ,m.w1,m.fO,m.ge,m.Dz,m.ev,m.as,m.XQ,m.nj,m.Gk,C.NW],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-row[_ngcontent-%COMP%]:hover   .mat-cell[_ngcontent-%COMP%]{border-color:#3f51b5}"]}),o})(),w=(()=>{class o{constructor(e,n){this.dialogRef=e,this.data=n,this.stati=[{id:1,nome:"PAGATA"},{id:2,nome:"NON PAGATA"}]}onNoClick(){this.dialogRef.close()}getChanges(e,n){return{importo:e,statoId:n}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(r.so),t.Y36(r.WI))},o.\u0275cmp=t.Xpm({type:o,selectors:[["invoicesbycustomer-component-dialog"]],decls:17,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["appearance","fill"],["type","number","matInput","","required","",3,"ngModel","ngModelChange"],["matInput","","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],[3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Modifica Fattura"),t.qZA(),t.TgZ(2,"div",1)(3,"mat-form-field",2)(4,"mat-label"),t._uU(5,"Importo"),t.qZA(),t.TgZ(6,"input",3),t.NdJ("ngModelChange",function(c){return n.data.importo=c}),t.qZA()(),t.TgZ(7,"mat-form-field",2)(8,"mat-label"),t._uU(9,"Stato"),t.qZA(),t.TgZ(10,"mat-select",4),t.NdJ("ngModelChange",function(c){return n.data.statoId=c}),t.YNc(11,k,2,2,"mat-option",5),t.qZA()()(),t.TgZ(12,"div",6)(13,"button",7),t.NdJ("click",function(){return n.onNoClick()}),t._uU(14,"Annulla"),t.qZA(),t.TgZ(15,"button",8),t._uU(16,"Ok"),t.qZA()()),2&e&&(t.xp6(6),t.Q6J("ngModel",n.data.importo),t.xp6(4),t.Q6J("ngModel",n.data.statoId),t.xp6(1),t.Q6J("ngForOf",n.stati),t.xp6(4),t.Q6J("mat-dialog-close",n.getChanges(n.data.importo,n.data.statoId)))},directives:[r.uh,r.xY,f.KE,f.hX,l.wV,B.Nt,l.Fj,l.Q7,l.JJ,l.On,T.gD,p.sg,A.ey,r.H8,g.lW,r.ZT],encapsulation:2}),o})();const P=[{path:":id",component:R}];let j=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.ez,v.l,u.Bz.forChild(P),h.q,l.u5,l.UX],u.Bz]}),o})()}}]);