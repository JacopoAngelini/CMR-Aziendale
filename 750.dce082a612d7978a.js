"use strict";(self.webpackChunkProgettoFinale=self.webpackChunkProgettoFinale||[]).push([[750],{6750:(tt,g,m)=>{m.r(g),m.d(g,{CustomersModule:()=>K});var C=m(9808),h=m(6087),N=m(8505),u=m(8966),t=m(5e3),A=m(2340),q=m(520);let v=(()=>{class o{constructor(e){this.http=e,this.pathApi=A.N.pathApi}getAllCustomers(e){return this.http.get(this.pathApi+`/api/clienti?page=${e}&size=20&sort=id,ASC`)}getComuni(){return this.http.get(this.pathApi+"/api/comuni?page=0&size=20&sort=id,ASC")}getProvince(){return this.http.get(this.pathApi+"/api/province?page=0&size=20&sort=id,ASC")}getTipi(){return this.http.get(this.pathApi+"/api/clienti/tipicliente")}newCustomer(e){return this.http.post(this.pathApi+"/api/clienti",e)}deleteInvoicesCustomer(e){return this.http.delete(this.pathApi+`/api/fatture/cliente/${e}`)}deleteCustomer(e){return this.http.delete(this.pathApi+`/api/clienti/${e}`)}editCustomer(e,i){return this.http.put(this.pathApi+`/api/clienti/${e}`,i)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(q.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var _=m(4936),s=m(8279),f=m(7423),d=m(1083),p=m(7322),Z=m(7531),a=m(3075);function I(o,n){1&o&&(t.TgZ(0,"th",13),t._uU(1," Id "),t.qZA())}function U(o,n){if(1&o&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function b(o,n){1&o&&(t.TgZ(0,"th",13),t._uU(1," Ragione Sociale "),t.qZA())}function S(o,n){if(1&o&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.ragioneSociale," ")}}function x(o,n){1&o&&(t.TgZ(0,"th",13),t._uU(1," Email "),t.qZA())}function F(o,n){if(1&o&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.email," ")}}function Y(o,n){1&o&&(t.TgZ(0,"th",13),t._uU(1," Partita IVA "),t.qZA())}function w(o,n){if(1&o&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.partitaIva," ")}}function k(o,n){1&o&&(t.TgZ(0,"th",13),t._uU(1," Azioni "),t.qZA())}const J=function(o){return["/invoicesbycustomer",o]};function Q(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"td",14)(1,"button",15),t._uU(2,"Fatture"),t.qZA(),t.TgZ(3,"button",16),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().editcustomer(l)}),t._uU(4,"Modifica"),t.qZA(),t.TgZ(5,"button",17),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().deleteCustomer(l.id)}),t._uU(6,"Elimina"),t.qZA()()}if(2&o){const e=n.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(1,J,e.id))}}function M(o,n){1&o&&t._UZ(0,"tr",18)}function G(o,n){1&o&&t._UZ(0,"tr",19)}let y=(()=>{class o{constructor(e,i){this.ctmSrv=e,this.dialog=i,this.customersList=!0,this.displayedColumns=["Id","Ragione Sociale","Email","Partita IVA","Azioni"],this.customers=[]}ngOnInit(){this.getAllCustomers(0)}ngAfterViewInit(){this.paginator.page.pipe((0,N.b)(()=>this.getAllCustomers(this.paginator.pageIndex))).subscribe()}getAllCustomers(e){this.ctmSrv.getAllCustomers(e).subscribe(i=>{this.res=i,this.customers=this.res.content,console.log(this.res)},i=>{console.log(i)})}deleteCustomer(e){confirm("sicuro di voler cancellare questo cliente e tutte le sue fatture?")&&(this.ctmSrv.deleteInvoicesCustomer(e).subscribe(),this.ctmSrv.deleteCustomer(e).subscribe(),setTimeout(()=>{location.reload()},2500))}editcustomer(e){this.dialog.open(z,{width:"250px",data:{ragioneSociale:null,email:null,partitaIva:null}}).afterClosed().subscribe(r=>{console.log(e),null!=r.ragioneSociale&&null!=r.email&&null!=r.partitaIva&&(e.ragioneSociale=r.ragioneSociale,e.email=r.email,e.partitaIva=r.partitaIva,this.ctmSrv.editCustomer(e.id,e).subscribe())})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v),t.Y36(u.uw))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-customers"]],viewQuery:function(e,i){if(1&e&&t.Gf(h.NW,5),2&e){let r;t.iGM(r=t.CRH())&&(i.paginator=r.first)}},decls:21,vars:6,consts:[["id","customers",3,"customersList"],[1,"container-fluid","my-4"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","Id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Ragione Sociale"],["matColumnDef","Email"],["matColumnDef","Partita IVA"],["matColumnDef","Azioni"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page",3,"length","pageSize"],["mat-header-cell",""],["mat-cell",""],["mat-raised-button","",1,"me-3",3,"routerLink"],["mat-raised-button","","color","primary",1,"me-3",3,"click"],["mat-stroked-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"app-sidebar",0)(1,"div",1)(2,"table",2),t.ynx(3,3),t.YNc(4,I,2,0,"th",4),t.YNc(5,U,2,1,"td",5),t.BQk(),t.ynx(6,6),t.YNc(7,b,2,0,"th",4),t.YNc(8,S,2,1,"td",5),t.BQk(),t.ynx(9,7),t.YNc(10,x,2,0,"th",4),t.YNc(11,F,2,1,"td",5),t.BQk(),t.ynx(12,8),t.YNc(13,Y,2,0,"th",4),t.YNc(14,w,2,1,"td",5),t.BQk(),t.ynx(15,9),t.YNc(16,k,2,0,"th",4),t.YNc(17,Q,7,3,"td",5),t.BQk(),t.YNc(18,M,1,0,"tr",10),t.YNc(19,G,1,0,"tr",11),t.qZA(),t._UZ(20,"mat-paginator",12),t.qZA()()),2&e&&(t.Q6J("customersList",i.customersList),t.xp6(2),t.Q6J("dataSource",i.customers),t.xp6(16),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("length",i.res.totalElements)("pageSize",i.res.pageable.pageSize))},directives:[_.k,s.BZ,s.w1,s.fO,s.ge,s.Dz,s.ev,f.lW,d.rH,s.as,s.XQ,s.nj,s.Gk,h.NW],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-row[_ngcontent-%COMP%]:hover   .mat-cell[_ngcontent-%COMP%]{border-color:#3f51b5}"]}),o})(),z=(()=>{class o{constructor(e,i){this.dialogRef=e,this.data=i}onNoClick(){this.dialogRef.close()}getChanges(e,i,r){return{ragioneSociale:e,email:i,partitaIva:r}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.so),t.Y36(u.WI))},o.\u0275cmp=t.Xpm({type:o,selectors:[["customer-component-dialog"]],decls:20,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["appearance","fill"],["type","text","matInput","","required","",3,"ngModel","ngModelChange"],["type","email","matInput","","required","",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Modifica Cliente"),t.qZA(),t.TgZ(2,"div",1)(3,"mat-form-field",2)(4,"mat-label"),t._uU(5,"Ragione Sociale"),t.qZA(),t.TgZ(6,"input",3),t.NdJ("ngModelChange",function(l){return i.data.ragioneSociale=l}),t.qZA()(),t.TgZ(7,"mat-form-field",2)(8,"mat-label"),t._uU(9,"Email"),t.qZA(),t.TgZ(10,"input",4),t.NdJ("ngModelChange",function(l){return i.data.email=l}),t.qZA()(),t.TgZ(11,"mat-form-field",2)(12,"mat-label"),t._uU(13,"Partita Iva"),t.qZA(),t.TgZ(14,"input",3),t.NdJ("ngModelChange",function(l){return i.data.partitaIva=l}),t.qZA()()(),t.TgZ(15,"div",5)(16,"button",6),t.NdJ("click",function(){return i.onNoClick()}),t._uU(17,"Annulla"),t.qZA(),t.TgZ(18,"button",7),t._uU(19,"Ok"),t.qZA()()),2&e&&(t.xp6(6),t.Q6J("ngModel",i.data.ragioneSociale),t.xp6(4),t.Q6J("ngModel",i.data.email),t.xp6(4),t.Q6J("ngModel",i.data.partitaIva),t.xp6(4),t.Q6J("mat-dialog-close",i.getChanges(i.data.ragioneSociale,i.data.email,i.data.partitaIva)))},directives:[u.uh,u.xY,p.KE,p.hX,Z.Nt,a.Fj,a.Q7,a.JJ,a.On,u.H8,f.lW,u.ZT],encapsulation:2}),o})();var D=m(5253),E=m(7110),c=m(5615),O=m(4107),P=m(508);function R(o,n){1&o&&t._uU(0,"Dati dell'azienda")}function L(o,n){if(1&o&&(t.TgZ(0,"mat-option",32),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function $(o,n){1&o&&t._uU(0,"Dati del contatto")}function B(o,n){1&o&&t._uU(0,"Dati Sede Operativa")}function j(o,n){if(1&o&&(t.TgZ(0,"mat-option",32),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function H(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-option",33),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().getIdComune(l)}),t._uU(1),t.qZA()}if(2&o){const e=n.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function V(o,n){1&o&&t._uU(0,"Fine")}function X(o,n){1&o&&(t.TgZ(0,"div",34)(1,"h2",35),t._uU(2,"Cliente registrato con successo"),t.qZA()())}const W=[{path:"",component:y},{path:":id",component:(()=>{class o{constructor(e,i,r){this._formBuilder=e,this.cstSrv=i,this.router=r,this.isLinear=!1,this.province=[],this.tipi=[],this.comuniNomi=[],this.NewCustomersList=!0,this.firstFormGroup=this._formBuilder.group({RagioneSociale:["",a.kI.required],partitaIva:["",a.kI.required],email:["",a.kI.required],pec:["",a.kI.required],telefono:["",a.kI.required],tipoCliente:["",a.kI.required]}),this.secondFormGroup=this._formBuilder.group({nomeContatto:["",a.kI.required],cognomeContatto:["",a.kI.required],emailContatto:["",a.kI.required],telefonoContatto:["",a.kI.required]}),this.thirdFormGroup=this._formBuilder.group({via:["",a.kI.required],civico:["",a.kI.required],cap:["",a.kI.required],localita:["",a.kI.required],comune:["",a.kI.required],provincia:["",a.kI.required]}),this.save=!1}ngOnInit(){this.getProvince(),this.getTipi()}newCustomer(){this.save=!0,setInterval(()=>{this.save=!1},1500);let e={ragioneSociale:"",partitaIva:"",tipoCliente:"",email:"",pec:"",telefono:"",nomeContatto:"",cognomeContatto:"",telefonoContatto:"",emailContatto:"",indirizzoSedeOperativa:{via:"",civico:0,cap:0,localita:"",comune:{id:0,nome:"",provincia:{id:0,nome:"",sigla:""}}}};e.ragioneSociale=this.firstFormGroup.value.RagioneSociale,e.partitaIva=this.firstFormGroup.value.partitaIva,e.tipoCliente=this.firstFormGroup.value.tipoCliente,e.email=this.firstFormGroup.value.email,e.pec=this.firstFormGroup.value.pec,e.telefono=this.firstFormGroup.value.telefono,e.nomeContatto=this.secondFormGroup.value.nomeContatto,e.cognomeContatto=this.secondFormGroup.value.cognomeContatto,e.telefonoContatto=this.secondFormGroup.value.telefonoContatto,e.emailContatto=this.secondFormGroup.value.emailContatto,e.indirizzoSedeOperativa.via=this.thirdFormGroup.value.via,e.indirizzoSedeOperativa.civico=this.thirdFormGroup.value.civico,e.indirizzoSedeOperativa.cap=this.thirdFormGroup.value.cap,e.indirizzoSedeOperativa.localita=this.thirdFormGroup.value.localita,e.indirizzoSedeOperativa.comune.id=this.comuneId,this.cstSrv.newCustomer(e).subscribe(),setTimeout(()=>{this.router.navigate(["/customers"])},1e3)}getComuni(){this.comuniNomi=[""],this.cstSrv.getComuni().subscribe(e=>{this.res=e,this.res.content.forEach(i=>{this.selectedProvince==i.provincia.nome&&this.comuniNomi.push(i.nome)})})}getIdComune(e){for(let i=0;i<this.res.content.length;i++)this.res.content[i].nome==e&&(this.comuneId=this.res.content[i].id)}getProvince(){this.cstSrv.getProvince().subscribe(e=>{this.res2=e,this.res2.content.forEach(i=>{this.province.push(i.nome)})})}getTipi(){this.cstSrv.getTipi().subscribe(e=>{this.res3=e,this.res3.forEach(i=>{this.tipi.push(i)})})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.qu),t.Y36(v),t.Y36(d.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-new-customer"]],decls:104,vars:15,consts:[["id","customers",3,"NewCustomersList"],[1,"container","my-2"],["orientation","vertical",3,"linear"],["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],["appearance","fill"],["matInput","","formControlName","RagioneSociale","required",""],["appearance","fill",1,"mx-2"],["matInput","","formControlName","tipoCliente","required",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","partitaIva","required",""],["matInput","","formControlName","email","required",""],["matInput","","formControlName","pec","required",""],["matInput","","formControlName","telefono","required",""],["mat-button","","matStepperNext",""],["matInput","","formControlName","nomeContatto","placeholder","Ex. 1 Main St, New York, NY","required",""],["matInput","","formControlName","cognomeContatto","placeholder","Ex. 1 Main St, New York, NY","required",""],["matInput","","formControlName","emailContatto","placeholder","Ex. 1 Main St, New York, NY","required",""],["matInput","","formControlName","telefonoContatto","placeholder","Ex. 1 Main St, New York, NY","required",""],["mat-button","","matStepperPrevious",""],["matInput","","formControlName","via","placeholder","Ex. 1 Main St, New York, NY","required",""],["matInput","","formControlName","civico","placeholder","Ex. 1 Main St, New York, NY","required",""],["matInput","","formControlName","cap","placeholder","Ex. 1 Main St, New York, NY","required",""],["matInput","","formControlName","localita","placeholder","Ex. 1 Main St, New York, NY","required",""],["matInput","","formControlName","provincia","required","",3,"value","valueChange"],["matInput","","formControlName","comune","required","",3,"value","disabled","valueChange","click"],[3,"value","click",4,"ngFor","ngForOf"],[1,"bi","bi-emoji-wink"],["mat-raised-button","","color","primary",3,"click"],["class","bg-success rounded text-white mt-2 p-2 text-center",4,"ngIf"],[3,"value"],[3,"value","click"],[1,"bg-success","rounded","text-white","mt-2","p-2","text-center"],[1,"m-auto"]],template:function(e,i){1&e&&(t.TgZ(0,"app-sidebar",0)(1,"div",1)(2,"mat-stepper",2,3)(4,"mat-step",4)(5,"form",5),t.YNc(6,R,1,0,"ng-template",6),t.TgZ(7,"mat-form-field",7)(8,"mat-label"),t._uU(9,"Ragione Sociale"),t.qZA(),t._UZ(10,"input",8),t.qZA(),t.TgZ(11,"mat-form-field",9)(12,"mat-label"),t._uU(13,"Tipo Cliente"),t.qZA(),t.TgZ(14,"mat-select",10),t.YNc(15,L,2,2,"mat-option",11),t.qZA()(),t.TgZ(16,"mat-form-field",9)(17,"mat-label"),t._uU(18,"Partita IVA"),t.qZA(),t._UZ(19,"input",12),t.qZA(),t.TgZ(20,"mat-form-field",9)(21,"mat-label"),t._uU(22,"Email"),t.qZA(),t._UZ(23,"input",13),t.qZA(),t.TgZ(24,"mat-form-field",9)(25,"mat-label"),t._uU(26,"Pec"),t.qZA(),t._UZ(27,"input",14),t.qZA(),t.TgZ(28,"mat-form-field",9)(29,"mat-label"),t._uU(30,"Telefono"),t.qZA(),t._UZ(31,"input",15),t.qZA(),t.TgZ(32,"div")(33,"button",16),t._uU(34,"Avanti"),t.qZA()()()(),t.TgZ(35,"mat-step",4)(36,"form",5),t.YNc(37,$,1,0,"ng-template",6),t.TgZ(38,"mat-form-field",9)(39,"mat-label"),t._uU(40,"Nome contatto"),t.qZA(),t._UZ(41,"input",17),t.qZA(),t.TgZ(42,"mat-form-field",9)(43,"mat-label"),t._uU(44,"Cognome Contatto"),t.qZA(),t._UZ(45,"input",18),t.qZA(),t.TgZ(46,"mat-form-field",9)(47,"mat-label"),t._uU(48,"Email contatto"),t.qZA(),t._UZ(49,"input",19),t.qZA(),t.TgZ(50,"mat-form-field",9)(51,"mat-label"),t._uU(52,"Telefono contatto"),t.qZA(),t._UZ(53,"input",20),t.qZA(),t.TgZ(54,"div")(55,"button",21),t._uU(56,"Indietro"),t.qZA(),t.TgZ(57,"button",16),t._uU(58,"Avanti"),t.qZA()()()(),t.TgZ(59,"mat-step",4)(60,"form",5),t.YNc(61,B,1,0,"ng-template",6),t.TgZ(62,"mat-form-field",7)(63,"mat-label"),t._uU(64,"Via"),t.qZA(),t._UZ(65,"input",22),t.qZA(),t.TgZ(66,"mat-form-field",9)(67,"mat-label"),t._uU(68,"Civico"),t.qZA(),t._UZ(69,"input",23),t.qZA(),t.TgZ(70,"mat-form-field",9)(71,"mat-label"),t._uU(72,"Cap"),t.qZA(),t._UZ(73,"input",24),t.qZA(),t.TgZ(74,"mat-form-field",9)(75,"mat-label"),t._uU(76,"localit\xe0"),t.qZA(),t._UZ(77,"input",25),t.qZA(),t.TgZ(78,"mat-form-field",7)(79,"mat-label"),t._uU(80,"Provincia"),t.qZA(),t.TgZ(81,"mat-select",26),t.NdJ("valueChange",function(l){return i.selectedProvince=l}),t.YNc(82,j,2,2,"mat-option",11),t.qZA()(),t.TgZ(83,"mat-form-field",9)(84,"mat-label"),t._uU(85,"Comune"),t.qZA(),t.TgZ(86,"mat-select",27),t.NdJ("valueChange",function(l){return i.selectedComuni=l})("click",function(){return i.getComuni()}),t.YNc(87,H,2,2,"mat-option",28),t.qZA(),t.TgZ(88,"mat-hint"),t._uU(89,"Selezionare prima la provincia"),t.qZA()(),t.TgZ(90,"div")(91,"button",21),t._uU(92,"Indietro"),t.qZA(),t.TgZ(93,"button",16),t._uU(94,"Avanti"),t.qZA()()()(),t.TgZ(95,"mat-step"),t.YNc(96,V,1,0,"ng-template",6),t.TgZ(97,"p"),t._uU(98,"Ricontrolla i dati inseriti e premi il pulsante, hai concluso la procedura di registrazione "),t._UZ(99,"i",29),t.qZA(),t.TgZ(100,"div")(101,"button",30),t.NdJ("click",function(){return i.newCustomer()}),t._uU(102,"Salva Cliente"),t.qZA()(),t.YNc(103,X,3,0,"div",31),t.qZA()()()()),2&e&&(t.Q6J("NewCustomersList",i.NewCustomersList),t.xp6(2),t.Q6J("linear",!i.isLinear),t.xp6(2),t.Q6J("stepControl",i.firstFormGroup),t.xp6(1),t.Q6J("formGroup",i.firstFormGroup),t.xp6(10),t.Q6J("ngForOf",i.tipi),t.xp6(20),t.Q6J("stepControl",i.secondFormGroup),t.xp6(1),t.Q6J("formGroup",i.secondFormGroup),t.xp6(23),t.Q6J("stepControl",i.thirdFormGroup),t.xp6(1),t.Q6J("formGroup",i.thirdFormGroup),t.xp6(21),t.Q6J("value",i.selectedProvince),t.xp6(1),t.Q6J("ngForOf",i.province),t.xp6(4),t.Q6J("value",i.selectedComuni)("disabled",null==i.selectedProvince),t.xp6(1),t.Q6J("ngForOf",i.comuniNomi),t.xp6(16),t.Q6J("ngIf",i.save))},directives:[_.k,c.Vq,c.C0,a._Y,a.JL,a.sg,c.VY,p.KE,p.hX,Z.Nt,a.Fj,a.JJ,a.u,a.Q7,O.gD,C.sg,P.ey,f.lW,c.Ic,c.fd,p.bx,C.O5],styles:[""]}),o})()}];let K=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[C.ez,D.l,d.Bz.forChild(W),E.q,a.u5,a.UX],d.Bz]}),o})()}}]);