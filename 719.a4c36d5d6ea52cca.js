"use strict";(self.webpackChunkProgettoFinale=self.webpackChunkProgettoFinale||[]).push([[719],{5719:(W,g,a)=>{a.r(g),a.d(g,{InvoicesModule:()=>H});var u=a(9808),c=a(8966),h=a(6087),T=a(8505),t=a(5e3),I=a(1792),C=a(4936),r=a(8279),v=a(7423),p=a(7322),s=a(3075),Z=a(7531),_=a(4107),A=a(508);function N(e,i){1&e&&(t.TgZ(0,"th",14),t._uU(1," Numero Fattura "),t.qZA())}function b(e,i){if(1&e&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.hij(" ",o.numero," ")}}function U(e,i){1&e&&(t.TgZ(0,"th",14),t._uU(1," Azienda Intestataria "),t.qZA())}function x(e,i){if(1&e&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.hij(" ",o.cliente.ragioneSociale," ")}}function q(e,i){1&e&&(t.TgZ(0,"th",14),t._uU(1," Importo "),t.qZA())}function y(e,i){if(1&e&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.hij(" ",o.importo," ")}}function F(e,i){1&e&&(t.TgZ(0,"th",14),t._uU(1," Anno "),t.qZA())}function w(e,i){if(1&e&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.hij(" ",o.anno," ")}}function Y(e,i){1&e&&(t.TgZ(0,"th",14),t._uU(1," Stato "),t.qZA())}function J(e,i){if(1&e&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.hij(" ",o.stato.nome," ")}}function D(e,i){1&e&&(t.TgZ(0,"th",14),t._uU(1," Azioni "),t.qZA())}function Q(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"td",15)(1,"button",16),t.NdJ("click",function(){const m=t.CHM(o).$implicit;return t.oxw().editInvoice(m)}),t._uU(2,"Modifica"),t.qZA(),t.TgZ(3,"button",17),t.NdJ("click",function(){const m=t.CHM(o).$implicit;return t.oxw().deleteInvoice(m.id)}),t._uU(4,"Elimina"),t.qZA()()}}function S(e,i){1&e&&t._UZ(0,"tr",18)}function M(e,i){1&e&&t._UZ(0,"tr",19)}function O(e,i){if(1&e&&(t.TgZ(0,"mat-option",9),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.Q6J("value",o.id),t.xp6(1),t.Oqu(o.nome)}}let G=(()=>{class e{constructor(o,n){this.ivcSrv=o,this.dialog=n,this.invoicesList=!0,this.data={importo:0,statoId:0},this.displayedColumns=["Numero Fattura","Intestatario","Importo","Anno","Stato","Azioni"]}ngOnInit(){this.getAllInvoices(0)}ngAfterViewInit(){this.paginator.page.pipe((0,T.b)(()=>this.getAllInvoices(this.paginator.pageIndex))).subscribe()}getAllInvoices(o){this.ivcSrv.getAllInvoices(o).subscribe(n=>{this.res=n,this.invoices=this.res.content,console.log(this.res),console.log(this.invoices)},n=>{console.log(n)})}deleteInvoice(o){confirm("sicuro di voler cancellare questa fattura?")&&(this.ivcSrv.deleteInvoice(o).subscribe(),setInterval(()=>{location.reload()},500))}editInvoice(o){this.dialog.open(k,{width:"250px",data:{importo:null,statoId:null}}).afterClosed().subscribe(l=>{console.log(l),null!=l.importo&&null!=l.statoId&&(o.importo=l.importo,o.stato.nome=1==l.statoId?"PAGATA":"NON PAGATA",o.stato.id=l.statoId,console.log(o),this.ivcSrv.editInvoice(o.id,o).subscribe())})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(I.x),t.Y36(c.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-invoices"]],viewQuery:function(o,n){if(1&o&&t.Gf(h.NW,5),2&o){let l;t.iGM(l=t.CRH())&&(n.paginator=l.first)}},decls:24,vars:6,consts:[["id","invoices",3,"invoicesList"],[1,"container-fluid","my-4"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","Numero Fattura"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Intestatario"],["matColumnDef","Importo"],["matColumnDef","Anno"],["matColumnDef","Stato"],["matColumnDef","Azioni"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page","showFirstLastButtons","",3,"length","pageSize"],["mat-header-cell",""],["mat-cell",""],["mat-raised-button","","color","primary",1,"me-3",3,"click"],["mat-stroked-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,n){1&o&&(t.TgZ(0,"app-sidebar",0)(1,"div",1)(2,"table",2),t.ynx(3,3),t.YNc(4,N,2,0,"th",4),t.YNc(5,b,2,1,"td",5),t.BQk(),t.ynx(6,6),t.YNc(7,U,2,0,"th",4),t.YNc(8,x,2,1,"td",5),t.BQk(),t.ynx(9,7),t.YNc(10,q,2,0,"th",4),t.YNc(11,y,2,1,"td",5),t.BQk(),t.ynx(12,8),t.YNc(13,F,2,0,"th",4),t.YNc(14,w,2,1,"td",5),t.BQk(),t.ynx(15,9),t.YNc(16,Y,2,0,"th",4),t.YNc(17,J,2,1,"td",5),t.BQk(),t.ynx(18,10),t.YNc(19,D,2,0,"th",4),t.YNc(20,Q,5,0,"td",5),t.BQk(),t.YNc(21,S,1,0,"tr",11),t.YNc(22,M,1,0,"tr",12),t.qZA(),t._UZ(23,"mat-paginator",13),t.qZA()()),2&o&&(t.Q6J("invoicesList",n.invoicesList),t.xp6(2),t.Q6J("dataSource",n.invoices),t.xp6(19),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("length",n.res.totalElements)("pageSize",n.res.pageable.pageSize))},directives:[C.k,r.BZ,r.w1,r.fO,r.ge,r.Dz,r.ev,v.lW,r.as,r.XQ,r.nj,r.Gk,h.NW],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-row[_ngcontent-%COMP%]:hover   .mat-cell[_ngcontent-%COMP%]{border-color:#3f51b5}"]}),e})(),k=(()=>{class e{constructor(o,n){this.dialogRef=o,this.data=n,this.stati=[{id:1,nome:"PAGATA"},{id:2,nome:"NON PAGATA"}]}onNoClick(){this.dialogRef.close()}getChanges(o,n){return{importo:o,statoId:n}}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(c.so),t.Y36(c.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["invoices-component-dialog"]],decls:17,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["appearance","fill"],["type","number","matInput","","required","",3,"ngModel","ngModelChange"],["matInput","","required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],[3,"value"]],template:function(o,n){1&o&&(t.TgZ(0,"h1",0),t._uU(1,"Modifica Fattura"),t.qZA(),t.TgZ(2,"div",1)(3,"mat-form-field",2)(4,"mat-label"),t._uU(5,"Importo"),t.qZA(),t.TgZ(6,"input",3),t.NdJ("ngModelChange",function(m){return n.data.importo=m}),t.qZA()(),t.TgZ(7,"mat-form-field",2)(8,"mat-label"),t._uU(9,"Stato"),t.qZA(),t.TgZ(10,"mat-select",4),t.NdJ("ngModelChange",function(m){return n.data.statoId=m}),t.YNc(11,O,2,2,"mat-option",5),t.qZA()()(),t.TgZ(12,"div",6)(13,"button",7),t.NdJ("click",function(){return n.onNoClick()}),t._uU(14,"Annulla"),t.qZA(),t.TgZ(15,"button",8),t._uU(16,"Ok"),t.qZA()()),2&o&&(t.xp6(6),t.Q6J("ngModel",n.data.importo),t.xp6(4),t.Q6J("ngModel",n.data.statoId),t.xp6(1),t.Q6J("ngForOf",n.stati),t.xp6(4),t.Q6J("mat-dialog-close",n.getChanges(n.data.importo,n.data.statoId)))},directives:[c.uh,c.xY,p.KE,p.hX,s.wV,Z.Nt,s.Fj,s.Q7,s.JJ,s.On,_.gD,u.sg,A.ey,c.H8,v.lW,c.ZT],encapsulation:2}),e})();var z=a(5253),d=a(1083),B=a(7110),f=a(5615);function R(e,i){1&e&&t._uU(0,"Dati della fattura")}function P(e,i){if(1&e&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.Q6J("value",o.id),t.xp6(1),t.Oqu(o.nome)}}function j(e,i){1&e&&t._uU(0,"Fine")}function L(e,i){1&e&&(t.TgZ(0,"div",19)(1,"h2",20),t._uU(2,"Fattura registrata con successo"),t.qZA()())}const $=[{path:"",component:G},{path:":0",component:(()=>{class e{constructor(o,n,l,m){this._formBuilder=o,this.router=n,this.actRouter=l,this.ivsSrv=m,this.stati=[{id:1,nome:"PAGATA"},{id:2,nome:"NON PAGATA"}],this.isLinear=!1,this.Newinvoices=!0,this.firstFormGroup=this._formBuilder.group({importo:["",s.kI.required],anno:["",s.kI.required],stato:["",s.kI.required],numero:["",s.kI.required]}),this.save=!1}ngOnInit(){this.sub=this.actRouter.params.subscribe(o=>{this.idUser=+o[0],console.log(this.idUser)})}newInvoice(){this.save=!0;let o={data:"",numero:0,anno:0,importo:0,stato:{id:0,nome:""},cliente:{id:0}};o.anno=this.firstFormGroup.value.anno,o.importo=this.firstFormGroup.value.importo,o.stato.id=this.firstFormGroup.value.stato,o.cliente.id=this.idUser,o.numero=this.firstFormGroup.value.numero,o.data=(new Date).toISOString(),console.log(o),this.ivsSrv.addInvoice(o).subscribe(),setTimeout(()=>{this.save=!1},2e3),setTimeout(()=>{this.router.navigate(["/invoicesbycustomer",this.idUser])},1e3)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(s.qu),t.Y36(d.F0),t.Y36(d.gz),t.Y36(I.x))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-new-invoices"]],decls:36,vars:6,consts:[["id","newinvoice",3,"Newinvoices"],[1,"container","my-2"],["orientation","vertical",3,"linear"],["stepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],["appearance","fill"],["type","number","matInput","","formControlName","numero","required",""],["appearance","fill",1,"mx-2"],["type","number","matInput","","formControlName","importo","required",""],["matInput","","formControlName","stato","required",""],[3,"value",4,"ngFor","ngForOf"],["type","number","matInput","","formControlName","anno","required",""],["mat-button","","matStepperNext",""],[1,"bi","bi-emoji-wink"],["mat-raised-button","","color","primary",3,"click"],["class","bg-success rounded text-white mt-2 p-2 text-center",4,"ngIf"],[3,"value"],[1,"bg-success","rounded","text-white","mt-2","p-2","text-center"],[1,"m-auto"]],template:function(o,n){1&o&&(t.TgZ(0,"app-sidebar",0)(1,"div",1)(2,"mat-stepper",2,3)(4,"mat-step",4)(5,"form",5),t.YNc(6,R,1,0,"ng-template",6),t.TgZ(7,"mat-form-field",7)(8,"mat-label"),t._uU(9,"Numero"),t.qZA(),t._UZ(10,"input",8),t.qZA(),t.TgZ(11,"mat-form-field",9)(12,"mat-label"),t._uU(13,"Importo"),t.qZA(),t._UZ(14,"input",10),t.qZA(),t.TgZ(15,"mat-form-field",9)(16,"mat-label"),t._uU(17,"Stato"),t.qZA(),t.TgZ(18,"mat-select",11),t.YNc(19,P,2,2,"mat-option",12),t.qZA()(),t.TgZ(20,"mat-form-field",9)(21,"mat-label"),t._uU(22,"Anno"),t.qZA(),t._UZ(23,"input",13),t.qZA(),t.TgZ(24,"div")(25,"button",14),t._uU(26,"Avanti"),t.qZA()()()(),t.TgZ(27,"mat-step"),t.YNc(28,j,1,0,"ng-template",6),t.TgZ(29,"p"),t._uU(30,"Ricontrolla i dati inseriti e premi il pulsante, hai concluso la procedura di registrazione "),t._UZ(31,"i",15),t.qZA(),t.TgZ(32,"div")(33,"button",16),t.NdJ("click",function(){return n.newInvoice()}),t._uU(34,"Salva Fattura"),t.qZA()(),t.YNc(35,L,3,0,"div",17),t.qZA()()()()),2&o&&(t.Q6J("Newinvoices",n.Newinvoices),t.xp6(2),t.Q6J("linear",!n.isLinear),t.xp6(2),t.Q6J("stepControl",n.firstFormGroup),t.xp6(1),t.Q6J("formGroup",n.firstFormGroup),t.xp6(14),t.Q6J("ngForOf",n.stati),t.xp6(16),t.Q6J("ngIf",n.save))},directives:[C.k,f.Vq,f.C0,s._Y,s.JL,s.sg,f.VY,p.KE,p.hX,s.wV,Z.Nt,s.Fj,s.JJ,s.u,s.Q7,_.gD,u.sg,A.ey,v.lW,f.Ic,u.O5],styles:[""]}),e})()}];let H=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.ez,z.l,d.Bz.forChild($),B.q,s.u5,s.UX],d.Bz]}),e})()}}]);